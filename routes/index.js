var express = require('express');
var router = express.Router();
var url = require('url');

/* GET home page. */

router.get('/', function (req, res) {
  res.render('index', {title: 'use /ie-tester?params-for-test'});
});


router.get('/ie-tester', function (req, res) {

  var sent = {
    query: req.query,
    params: req.params,
    body: req.body,
    title: 'test IE query-params length',
  };
  console.log(req.url);

  var queryString = url.parse(req.url).query;
  var queryLength = queryString.length;

  console.log('req.query:', sent.query);
  console.log('req.params: ', sent.params);
  console.log('req.body: ', sent.body);

  res.render('ie', {
    title: 'test IE query-params length',
    queryString: queryString,
    queryLength: queryLength
  });
});


router.post('/ie-tester', function (req, res) {

  var sent = {
    body: req.body,
    title: 'test IE query-params length',
  };

  console.log('req.body: ', sent.body);

  res.render('ie_post', {
    title: 'test IE POST length',
    queryString: req.body,
    queryLength: JSON.stringify(req.body)
  });
});


module.exports = router;

/**
 * fis=0&fipt=0&pvid=145737075345177403&art=091e9c5e80eff7b3&cc=83&env=1&hcent=&leaf=1257&mcent=&mic=&pt=1728&sec=&pug=&scent=&tmg=&tug=&uri=%2Fdefault&segm=0&cui=28233_2%2C3812_3%2C44_3%2C3814_3&dmp=a32500%2Ca32922%2Ca32534%2Cz030261%2Cz30287%2Ca32553%2Ca30299%2Cz00468%2Cz01588%2Cz00108%2Ca2813%2Cz00131%2Cz30308%2Ca00040%2Ca2794%2Ca2796%2Ca2853%2Ca2811%2Ca138903%2Ca132877%2Cz00184%2Cz2784%2Cz00014%2Ca2870%2Cz00058%2Cz00143%2Cz30303%2Cz030144%2Ca00117%2Cz030276%2Cz00167%2Ca00038%2Ca132546%2Ca2823%2Ca32930%2Ca2828%2Ca2785%2Ca2790%2Ca32512%2Cz30295%2Ca2783%2Ca140740%2Ca32931%2Cz01559%2Cz02783%2Ca2806%2Ca139416%2Ca32951%2Cz00179%2Ca118963%2Ca2802%2Ca126686%2Cz030143%2Call%2Ca00082%2Cz00217%2Cz00148%2Ca32923%2Ca2804%2Cz00229%2Cz01451%2Cz030056%2Ca2900%2Cz02784%2Cz30289%2Ca131184%2Ca2791%2Ca32939%2Cz01610%2Cz02999%2Ca30314%2Ca132466%2Ca2788%2Ca131012%2Cz00135%2Ca2786%2Ca129793%20%2Cz00134%2Ca00006%2Cz00072%2Cz00190%2Ca33185%2Cz030146%2Cz00180%2Ca32921%2Ca2803%2Ca2852%2Cz30286%2C132591%2Cz02913%2Cz00130%2Ca01560%2Ca30278%2Ca30292%2Ca32925%2Ca00191%2Cz01449%2Ca32997%2Ca32512%2Ca33046%2Cz02664%2Ca131179%2Cz00114%2Ca2809%2Ca2792%2Ca112591%2Ca112592%2Ca00188%2Cz30313%2Ca121402%2Ca2789%2Ca134953%20%2Ca32924%2Ca030018%2Ca00161%2Cz00151%2Cz00136%2Ca32920%2Ca2799%2Cz00182%2Ca2855%2Cz030139%2Ca32952%2Ca127022%2Ca2884%2Ca32504%2Cz030142%2Cz00144%2Ca133967%20%2Cz02999%2Cz00115%2Ca2801%2Ca2816%2Cz00204%2Ca32537%2Cz00174%2Cz00110%2Ca32933%2Ca2841%2Ca140843%2Cz01566%2Ca123032%2Ca30298%2Ca32928%2Cz00092%2Cz01649%2Ca32536%2Cz00173%2Ca32533%2Ca119940%2Cz00032%2Ca325023%2Ca30318%2Cz30293%2Cz01567%2Cz030027%2Cz00231%2Cz00127%2Cz00146%2Ca129794%2Ca2834%2C131186%2Cz00033%2Ca134024%20%2Ca32502%2C132876%2Ca2795%2Ca2798%2Cz030030%2Cz01719%2Ca2919%2Cz00145%2Ca140763%2Ca2863%2Ca2872%2Cz00205%2Ca2807%2Ca32953%2Cz00197%2C32501%2Ca133695%2Ca32938%2C134952%20%2Ca132426%2Ca142212%2Ca30323%2Cz00119%2Ca132265%2Ca2793%2Cz01570%2Ca134046%2Cz30288%2Ca030119%2Ca01503%2Cz00128%2Cz02781%2Cz02782%2Ca127023%20%2Ca2787%2Ca2815%2Cz00059%2Cz02669%2Ca32945%2Ca00171%2Ca141999%2Cz00120%2Ca32961%2Ca32929%2Cz00028%2Ca2800%2Ca32942%2Cz02670%2Cz02663%2Ca32530%2Cz02953%2Ca30302%2Ca2827%2Ca32927%2Ca137962%20%2Cz00015%2Ca33079%2Ca133943%20%2Ca00195%2Ca33004%2Cz030138%2Cz030133%2Cz9879%2Cz00086%2Cz00245%2Cz00465%2Ca2865%2Ca32967%2Ca32541%2Cz9880%2Cz00232%2Cz030137%2Cz00057%2Ca91338%2Ca32505%2Cz00200%2Ca32531%2Ca129792%20%2Cz01954%2Cz00230%2Cz02785%2Ca32926%2C131185%2Ca2805%2Ca02572%2Ca2814%2Cz30304%2Ca132261%2Cz030121%2Cz00150%2Cz030260%2Ca32506%2Ca2902%2Ca00087%2Cz00056%2Cz01448&excl_cat=ssg
 */
